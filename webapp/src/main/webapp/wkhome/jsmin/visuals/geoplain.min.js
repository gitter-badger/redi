"use strict";var geoPlain=angular.module("geoPlain",[]);myChart.factory("d3",function(){return d3}),myChart.directive("geoPlain",["d3","d3JSON",function(t,a){var e=function(a,e,r,n){var s=t.geo.kavrayskiy7().scale(170).rotate([-40,0]).translate([e/2,r/2]).precision(.1),o=t.geo.path().projection(s),p=t.geo.graticule();a.attr("width",e).attr("height",r),a.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",o),a.append("use").attr("class","stroke").attr("xlink:href","#sphere"),a.append("use").attr("class","fill").attr("xlink:href","#sphere"),a.append("path").datum(p).attr("class","graticule").attr("d",o),a.append("path").datum(n.route).attr("class","route").attr("d",o);var c=a.append("g").attr("class","points").selectAll("g").data(t.entries(n.places)).enter().append("g").attr("transform",function(t){return"translate("+s(t.value)+")"});c.append("circle").attr("r",4.5),c.append("text").attr("y",10).attr("dy",".71em").text(function(t){return t.key}),t.json("/wkhome/d3/world-50m.json",function(t,e){if(t)throw t;a.insert("path",".graticule").datum(topojson.feature(e,e.objects.land)).attr("class","land").attr("d",o),a.insert("path",".graticule").datum(topojson.mesh(e,e.objects.countries,function(t,a){return t!==a})).attr("class","boundary").attr("d",o)}),t.select(self.frameElement).style("height",r+"px")};return{restrict:"E",scope:{data:"="},compile:function(a,r,n){var s=t.select(a[0]).append("svg"),o=960,p=570;return function(t,a,r){t.$watch("data",function(t,a,r){e(s,o,p,r.data)},!0)}}}}]);