wkhomeControllers.controller("clusterKeywordsCloud",["$routeParams","$scope","$window","sparqlQuery","searchData","globalData",function(a,e,o,t,l,r){if(l.genericData=null,$("html,body").animate({scrollTop:$("#scrollToTop").offset().top},"1"),e.ifClick=function(e){l.genericData=e,o.location.hash="/"+a.lang+"/w/clusters?datacloud"},e.todos=[],e.loadData=function(){e.$apply(function(){e.filteredTodos=[],e.currentPage=1,e.numPerPage=10,e.maxSize=5,e.$watch("currentPage + numPerPage",function(){var a=(e.currentPage-1)*e.numPerPage,o=a+e.numPerPage;e.filteredTodos=e.todos.slice(a,o)})})},l.allkeywordsCloud)e.data=l.allkeywordsCloud;else{waitingDialog.show();var c=r.PREFIX+" CONSTRUCT { ?keyword rdfs:label ?k; uc:total ?totalPub } FROM <"+r.centralGraph+"> WHERE {  SELECT ?keyword ?k (COUNT(DISTINCT(?subject)) AS ?totalPub)  WHERE {  ?person foaf:publications ?subject.  ?subject dcterms:subject ?keywordSubject.  ?keywordSubject rdfs:label ?k.  BIND(IRI(?k) AS ?keyword) . }  GROUP BY ?keyword ?k  HAVING(?totalPub > 2 && ?totalPub < 180)  ORDER BY DESC(?totalPub)  LIMIT 145 }";t.querySrv({query:c},function(a){jsonld.compact(a,r.CONTEXT,function(a,o){e.$apply(function(){e.data={schema:{context:r.CONTEXT,fields:["rdfs:label","uc:total"]},data:o},l.allkeywordsCloud={schema:{context:r.CONTEXT,fields:["rdfs:label","uc:total"]},data:o},waitingDialog.hide()})})})}}]);