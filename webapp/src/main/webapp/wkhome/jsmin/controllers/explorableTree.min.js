wkhomeControllers.controller("exploreAuthor",["$routeParams","$scope","$rootScope","globalData","searchData","$window","sparqlQuery",function(a,t,o,e,n,i,u){$("html,body").animate({scrollTop:0},"slow"),t.authorId=a.text,t.publication=void 0;var c=e.PREFIX+"CONSTRUCT { <"+t.authorId+"> foaf:name ?name;      a foaf:Person;      foaf:img ?img. } WHERE {    GRAPH <"+e.centralGraph+"> {      <"+t.authorId+"> foaf:name ?name.      OPTIONAL{<"+t.authorId+"> foaf:img ?img}     } } LIMIT 1 ";u.querySrv({query:c},function(a){jsonld.compact(a,e.CONTEXT,function(a,o){t.$apply(function(){t.data=o})})}),clickonRelatedauthor=function(t){i.location.hash="/"+a.lang+"/w/author/"+t},t.ifrightClick=function(t){n.genericData=t,i.location.hash="/"+a.lang+"/w/cloud?datacloud"},t.clickPublications=function(){i.location.hash="/"+a.lang+"/w/publications/"+t.authorId},t.buildnetworks=function(){var a=_.findWhere(t.data["@graph"],{"@type":"foaf:Person"});if(a["foaf:name"]){var o=e.PREFIX+'CONSTRUCT {  <http://ucuenca.edu.ec/wkhuska/resultTitle> a uc:pagetitle. <http://ucuenca.edu.ec/wkhuska/resultTitle> uc:viewtitle "Authors Related With '+a["foaf:name"]+'"  .         ?subject rdfs:label ?name.         ?subject uc:total ?totalPub   } WHERE {  {    SELECT ?subject ?name (COUNT(DISTINCT ?relpublication) as ?totalPub)    WHERE {        GRAPH <'+e.clustersGraph+"> {          ?cluster foaf:publications ?publication .          ?publication uc:hasPerson <"+a["@id"]+"> .          ?cluster foaf:publications ?relpublication .          ?relpublication uc:hasPerson ?subject .          {            SELECT ?name {              GRAPH <"+e.centralGraph+"> {                 ?subject foaf:name ?name .              }            }          }          FILTER (?subject != <"+a["@id"]+">)        }    }    GROUP BY ?subject ?name  }}";waitingDialog.show("Loading Authors Related with "+a["foaf:name"]),u.querySrv({query:o},function(a){jsonld.compact(a,e.CONTEXT,function(a,o){o&&o.hasOwnProperty("@graph")?(t.ifrightClick(o),waitingDialog.hide()):waitingDialog.hide()})})}},t.numeroPub=function(a){return null!=a&&(a.constructor===Array||a instanceof Array)?a.length:1}}]);