<div id="scrollToTop">
</div>
<hr>
<hr>

<div ng-controller="exportController">
  <div ng-controller="groupbyCloud">
    <center>
      <h2 class="text-success page-header">{{'Grouping Publications'| translate}}</h2>
    </center>
    <div class="col-md-12">
      <div class="col-md-3">
        <h3 class="text-success" style="text-align: left">{{'Select Research Area'| translate}}:</h3>
        <!-- <select class="form-control" name="board" id="board" ng-model="selectedArea" ng-options="key.tag as key.tag for key  in areas">
                    <option value="">Select Theme</option>
                </select> -->
        <md-content>
          <form ng-submit="$event.preventDefault()">
            <md-autocomplete md-no-cache="true" md-selected-item="selectedArea" md-search-text="searchText"
            md-items="area in querySearch(searchText)" md-item-text="area"
            md-min-length="1" placeholder="{{'Palabra Clave' | translate}}">
              <md-item-template>
                <span md-highlight-text="searchText" md-highlight-flags="i">{{area}}</span>
              </md-item-template>
              <md-not-found>
                {{'No match' | translate}} "{{searchText}}".
              </md-not-found>
            </md-autocomplete>
          </form>
        </md-content>
      </div>

      <!-- <div class="col-md-3">
        <h3 class="text-success" style="text-align: left">{{'Group by'| translate}}:</h3>
        <select class="form-control" name="group" id="group" ng-model="gbselectedItem">
                    <option value="Todos">{{'All'| translate}}</option>
                    <option value="organization">{{'Source'| translate}}</option>
                </select>
      </div> -->
      <cloud-group data="data" style="display: block; height: 90% ; width: 80%" if-click="ifClick(value)" ng-model="value"></cloud-group>
    </div>



    <div class="col-md-10">
      <div class="row subject-cloud">
        <div id="scrollToHere" class="col-md-12">
          <div>
          </div>
          <div id="blackspace">
          </div>
          <div class="col-md-12 head-info">
            <div id="title" style="font-size:40pt">
            </div>
          </div>
          <div class="col-md-12 tree-node-info" style="height:100vh">
            <div ng-show="todos.length > 0">
              <br/>
              <div class="col-md-4" ng-show="showRepButtons">
                <button ng-click="exportData('pdf', 'ReportPublicationsByAuthor', author)" title="Export List to PDF">
                                    <img src="./resources/pdf.png" height="36" width="36" />
                                </button>
                <button ng-click="exportData('xls', 'ReportPublicationsByAuthor', author)" title="Export List to Excel">
                                    <img src="./resources/excel.png" height="36" width="36" />
                                </button>
                <br ng-show="loading" />
                <p ng-show="loading"><img src="./resources/loading.gif" align="middle" height="20" width="20"> Loading report...</p>
              </div>
              <div class="col-md-8" style="padding-top: 30px; font-size: 20pt; color: #003769; padding-left: 30%; font-style: italic">PUBLICACIONES</div>
            </div>
            <h3></h3>
            <h4 style="padding: 20px" class="text-success" ng-show="todos.length > 0"> {{'Total of Publications found'| translate }}: {{todos.length}} </h4>

            <div id="list">
              <ul style="width: 100%;">
                <li ng-repeat="publication in filteredTodos">
                  <div class="info">
                    <div class="heading">
                      <h2 class="title" ng-if="publication.uri['@id']"><a href="{{publication.uri['@id']}}" target='_blank'>{{publication.title}}</a></h2>
                      <h2 class="title" ng-if="!publication.uri['@id']">{{publication.title}}</h2>
                    </div>
                    <div class="body">
                      <strong ng-show="publication.abstract">{{'abstract'|translate}}:</strong>
                      <hm-read-more hm-text="{{publication.abstract}}" hm-limit="500" hm-more-text="{{ 'read.more' | translate }}" hm-less-text="{{ 'read.less' | translate}}" hm-dots-class="dots" hm-link-class="links" ng-show="publication.abstract" ng-show="publication.abstract"></hm-read-more>
                      </br>
                      <strong ng-show="publication.keywords">{{'palabras clave'|translate}}:</strong> <span ng-show="publication.keywords">{{publication.keywords}}</span>
                      </br>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <center ng-show="todos.length > 0">
              <ul uib-pagination boundary-links="true" total-items="todos.length" ng-model="currentPage" class="pagination-sm" max-size="maxSize" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul>
            </center>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-2" ng-show="todos.length > 0">
      <hr>

      <div class="tree-node-author-info" style="height:100vh">


        <div style="height: 100px"></div>

        <h4>{{'coauthor'|translate}}</h4>
        <div class="authorsByPublications">
          <div id="title" style="font-size:50pt"></div>
          <a href="" target="_blank"></a>
        </div>
        <hr>
        <h4>{{'relatedauthors'|translate}}</h4>
        <div class="authorsByClusters">
          <div id="title" style="font-size:50pt"></div>
          <a href="" target="_blank"></a>
        </div>
        <hr>

      </div>

    </div>
  </div>
</div>
